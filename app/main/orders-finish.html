<template>
    <div class="page">
        <div class="navbar">
            <div class="navbar-inner">
                <img class="theme-light-only" src="assets/custom/img/konbini-logo.svg" height="24" alt="" />
                <div class="right">

                </div>
            </div>
        </div>

        <div class="page-content">
            <div class="block text-align-center">
                <i class="icon material-icons color-green" style="font-size: 150px;">check_circle_outline</i>
            </div>
            <div class="block text-align-center">
                <span style="font-size: 24px">Payment Success</span>
            </div>
            <div class="block text-align-center">
                <span>Your order <span style="color: red;">#{{orderId}}</span> has been placed. A notification will be sent to you when it's ready to collect!</span>
            </div>
            <div class="block text-align-center">
                <p class="row">
                    <span></span>
                    <a class="col button button-big button-fill color-red" style="width: 200px;" href="/tab-order/">Create a new order</a>
                    <span></span>
                </p>
                <p class="row">
                    <span></span>
                    <a class="col button button-big button-fill color-red" style="width: 200px;" href="#" @click="closeApp">Finish</a>
                    <span></span>
                </p>
            </div>
        </div>    
        <!-- <div class="fab fab-right-top color-orange">
            <a href="#" class="link back">
                <i class="icon material-icons">close</i>
            </a>
        </div> -->

    </div>
</template>

<style scoped>
    .cart-name {
        font-size: 20px;
        font-weight: bold;
        letter-spacing: 0.5px;
        margin-top: 0px;
    }
</style>

<script>
    return {
        data: function () {
            return {
                orderId: '',
            }
        },
        methods: {
            closeApp: function(){
                var self = this;
                //app.exitApp();
                app.views.current.router.navigate('/tab-order/');
            },
            getUrlVars: function()
            {
                var vars = [], hash;
                var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
                for(var i = 0; i < hashes.length; i++)
                {
                    hash = hashes[i].split('=');
                    vars.push(hash[0]);
                    vars[hash[0]] = hash[1];
                }
                return vars;
            },
        },
        on: {
            pageInit: function () {
                var self = this;
                console.log(self.getUrlVars().order);
                self.$setState({
                    orderId: self.getUrlVars().order,
                })
            }
        }
    }
</script>