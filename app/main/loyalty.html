<template>
    <div class="page">
        <div class="navbar">
            <div class="navbar-inner">
                    <img class="theme-light-only" src="assets/custom/img/wokppllogo.png" height="36" alt="" />
                <div class="right">
                    <a href="#" class="link back">
                        <span>Back</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="page-content">
            <div class="block text-align-center">
                <i class="fa-stack fa-2x tooltip-init" data-tooltip="Loyalty">
                    <span class="fas fa-circle fa-stack-2x brand-color-strava"></span>
                    <span class="fas fa-gem fa-stack-1x fa-inverse"></span>
                </i>
            </div>
            <div class="block text-align-center">
                Spend $1 to earn 10 points<br>
                Redeem $1 of your next order with 50 points<br>
                Track your progress
            </div>

            <div class="block">
                <p>Loyalty points: {{displayPoint}}
                </p>
                <p>Redeem points: ${{displayRedeem.toFixed(2)}}
                </p>
                <div class="item-cell">
                    <div class="range-slider range-slider-init" data-label="true" id="rang">
                        <input id="loyaltyPoint" name="loyaltyPoint" type="range" min="0" max="{{loyalty}}" step="5" value="0" />
                    </div>
                </div>
            </div>
            
            <div class="block">
                <div class="col">
                    <button class="button button-big button-fill button-raised">Tap here to Redeem</button>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
    return {
        data: function () {
            return {
                loyalty: 1000,
                displayPoint: 1000,
                redeem: 0.00,
                displayRedeem: 0.00
            }
        },
        methods: {
            loadData: function () {
                var self = this;
            }
        },
        on: {
            pageInit: function () {
                var self = this;
                //self.loadData()
                
                self.$('input[name=loyaltyPoint]').change(function () {
                    // console.log($(this).val())
                    let p = 0;
                    p = $(this).val()
                    self.$setState({                        
                        displayPoint: self.loyalty - p,
                        displayRedeem: self.redeem + p/50
                    })
                });
            }
        }
    }
</script>