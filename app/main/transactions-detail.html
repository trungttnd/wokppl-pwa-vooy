<template>
    <div class="page">
        <div class="navbar">
            <div class="navbar-inner">               
                <img class="theme-light-only" src="assets/custom/img/konbini-logo.svg" height="24" alt="" />
                <div class="right">
                    <a href="#" class="link back">
                        <span>Back</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="page-content">
            <div class="block-title display-flex justify-content-space-between text-color-black">
                <span>Transactions Id: {{detail.orderNumber}}</span>
            </div>
            <div class="data-table card">
                    <table>
                        <thead>
                            <tr>
                                <th class="label-cell">Your cart</th>
                                <th class="numeric-cell">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each orderItems}}
                            <tr>
                                <td class="label-cell">{{this.productName}}</td>
                                <td class="numeric-cell">${{this.price.toFixed(2)}}</td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            <div class="card">
                <div class="card-content card-content-padding">
                    <div class="list no-hairlines no-hairlines-between">
                        <ul>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title">Subtotal</div>
                                        <div class="item-after">${{this.total.toFixed(2)}}</div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title">Discount</div>
                                        <div class="item-after">$0.00</div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title">GST</div>
                                        <div class="item-after">$0.00</div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title"><b>Grand Total</b></div>
                                        <div class="item-after"><b>${{this.total.toFixed(2)}}</b></div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>
<style>

</style>
<script>
    return {
        data: function () {
            return {
                detail: [],
                orderItems: [],
                total: 0,
            }
        },
        methods: {
            loadData: function () {
                var self = this;
                let tempTotal = 0;
                let det = JSON.parse(localStorage.getItem('detTransactions'));
                for (let i = 0; i < det.orderItems.length; i++){
                    tempTotal += det.orderItems[i].price
                }
                self.$setState({
                    detail: det,
                    orderItems: det.orderItems,
                    total: tempTotal,
                });
                
            },
        },
        on: {
            pageInit: function () {
                var self = this;
                self.loadData();
                console.log('self.detail', self.detail)
                console.log('self.detail.orderNumber: ', self.detail.orderNumber) 
            }
        }
    }
</script>